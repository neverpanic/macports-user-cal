# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id $

PortSystem              1.0

name                    subsurface
# when updating subsurface, it's probably a good idea to update libdivecomputer, too
version                 2011101900
categories              x11
platforms               darwin
license                 GPL-2
maintainers             cal openmaintainer

description             Subsurface is an open source dive log program written in C.
long_description        ${description}

homepage                http://subsurface.hohndel.org/
fetch.type              git
git.url                 https://github.com/torvalds/subsurface.git
git.branch              04f372f8aa5b4f9ba462e0e93b76f3dde6af00f1

patchfiles              Makefile.patch

depends_lib             path:lib/pkgconfig/glib-2.0.pc:glib2 \
                        port:libxml2 \
                        port:gtk2 \
                        port:hicolor-icon-theme \
                        port:gconf \
                        port:libdivecomputer

# declare universal variant, so get_canonical_archflags works
variant universal       {}

use_configure           no

build.args-append       CC=${configure.cc} \
                        EXTRACFLAGS="${configure.cflags} [get_canonical_archflags]" \
                        LDFLAGS="${configure.ldflags} [get_canonical_archflags]" \
                        prefix="${destroot}${prefix}"

destroot.args-append    prefix="${destroot}${prefix}"

