# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id $

PortSystem              1.0
PortGroup               active_variants 1.1

name                    virt-manager
version                 0.9.4
supported_archs         noarch
categories              emulators
platforms               darwin
license                 GPL
maintainers             cal openmaintainer

description             \
    Virtual Machine Manager is a desktop user interface for managing virtual \
    machines.
long_description        ${description} \
    It presents a summary view of running domains, their live performance \
    & resource utilization statistics. The detailed view graphs performance \
    & utilization over time. Wizards enable the creation of new domains, and \
    configuration & adjustment of a domain's resource allocation & virtual \
    hardware. An embedded VNC client viewer presents a full graphical console \
    to the guest domain.

homepage                http://virt-manager.org/
master_sites            http://virt-manager.org/download/sources/virt-manager/

checksums               rmd160  15b3d1da4e2571ef91899bcca14354cbf656242c \
                        sha256  dc8c553beeb15bb30cd5517b2105bcc47cf482b03523e522733c52b0e5df0fc0

depends_build           port:intltool
depends_lib             port:gnome-keyring \
                        port:policykit \
                        port:libvirt \
                        port:gtk-vnc \
                        port:vte

variant python27 description {Build using Python 2.7} conflicts python32 python33 {
    set python_version 27
    depends_lib-append  port:python${python_version} \
                        port:py${python_version}-pygtk \
                        port:py${python_version}-gnome \
                        port:py${python_version}-libxml2 \
                        port:py${python_version}-virtinst \
                        port:dbus-python${python_version}
    configure.python    ${prefix}/bin/python2.7
    require_active_variants libvirt python${python_version}
}
variant python32 description {Build using Python 3.2} conflicts python27 python33 {
    set python_version 32
    depends_lib-append  port:python${python_version} \
                        port:py${python_version}-pygtk \
                        port:py${python_version}-gnome \
                        port:py${python_version}-libxml2 \
                        port:py${python_version}-virtinst \
                        port:dbus-python${python_version}
    configure.python    ${prefix}/bin/python3.2
    require_active_variants libvirt python${python_version}
}
variant python33 description {Build using Python 3.3} conflicts python27 python32 {
    set python_version 33
    depends_lib-append  port:python${python_version} \
                        port:py${python_version}-pygtk \
                        port:py${python_version}-gnome \
                        port:py${python_version}-libxml2 \
                        port:py${python_version}-virtinst \
                        port:dbus-python${python_version}
    configure.python    ${prefix}/bin/python3.3
    require_active_variants libvirt python${python_version}
}
if {![variant_isset python32] && ![variant_isset python33]} {
    default_variants +python27
}

livecheck.type          regex
livecheck.url           ${master_sites}
livecheck.regex         "[quotemeta ${name}]-(\\d+(?:\\.\\d+)*)[quotemeta ${extract.suffix}]"
